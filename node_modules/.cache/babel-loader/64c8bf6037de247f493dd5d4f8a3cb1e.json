{"ast":null,"code":"import _slicedToArray from\"/Users/evgeniy/React/user-list/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{getUsers}from'../../redux/users/actions';import Paper from\"@material-ui/core/Paper\";import Table from\"@material-ui/core/Table\";import TableHead from\"@material-ui/core/TableHead\";import TableBody from\"@material-ui/core/TableBody\";import TableRow from\"@material-ui/core/TableRow\";import TableCell from\"@material-ui/core/TableCell\";import TablePagination from'@material-ui/core/TablePagination';import UserItem from'./UserItem';import TableLoader from'../../common/TableLoader';var headRows=[{id:'login',numeric:false,label:'Login'},{id:'profile link',numeric:false,label:'Profile link'}];var UsersList=function UsersList(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.users.list;}),data=_useSelector.data,loading=_useSelector.loading;var _useState=useState(Number.parseInt(localStorage.getItem(\"users_page\"))),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState(Number.parseInt(localStorage.getItem(\"users_per_page\"))),_useState4=_slicedToArray(_useState3,2),rowsPerPage=_useState4[0],setRowsPerPage=_useState4[1];useEffect(function(){var localPage=localStorage.getItem(\"users_page\");var localPerPage=localStorage.getItem(\"users_per_page\");if(!localPage){setPage(0);}if(!localPerPage){setRowsPerPage(5);}},[]);useEffect(function(){var per_page=100;dispatch(getUsers(per_page));},[dispatch]);var handleChangePage=function handleChangePage(event,pageNum){setPage(pageNum);localStorage.setItem(\"users_page\",pageNum);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setRowsPerPage(+event.target.value);handleChangePage(event,0);localStorage.setItem(\"users_per_page\",event.target.value);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Paper,{className:\"m020\"},/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,{className:\"tableHead\"},headRows.map(function(row){return/*#__PURE__*/React.createElement(TableCell,{key:row.id,align:row.numeric?'right':'left'},row.label);}))),/*#__PURE__*/React.createElement(TableBody,null,loading?/*#__PURE__*/React.createElement(TableLoader,{colSpan:3}):data===null||data===void 0?void 0:data.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(user){return/*#__PURE__*/React.createElement(UserItem,{key:user.id,user:user});}))),/*#__PURE__*/React.createElement(TablePagination,{rowsPerPageOptions:[5,10,20],component:\"div\",count:loading?rowsPerPage:data===null||data===void 0?void 0:data.length,rowsPerPage:rowsPerPage,page:page,backIconButtonProps:{'aria-label':'previous page'},nextIconButtonProps:{'aria-label':'next page'},onChangePage:handleChangePage,onChangeRowsPerPage:handleChangeRowsPerPage})));};export default UsersList;","map":{"version":3,"sources":["/Users/evgeniy/React/user-list/src/components/UsersList/index.jsx"],"names":["React","useState","useEffect","useDispatch","useSelector","getUsers","Paper","Table","TableHead","TableBody","TableRow","TableCell","TablePagination","UserItem","TableLoader","headRows","id","numeric","label","UsersList","dispatch","state","users","list","data","loading","Number","parseInt","localStorage","getItem","page","setPage","rowsPerPage","setRowsPerPage","localPage","localPerPage","per_page","handleChangePage","event","pageNum","setItem","handleChangeRowsPerPage","target","value","map","row","slice","user","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getUsers } from '../../redux/users/actions';\n\nimport Paper from \"@material-ui/core/Paper\";\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TablePagination from '@material-ui/core/TablePagination';\nimport UserItem from './UserItem';\nimport TableLoader from '../../common/TableLoader';\n\nconst headRows = [\n  { id: 'login', numeric: false, label: 'Login' },\n  { id: 'profile link', numeric: false, label: 'Profile link' },\n];\n\nconst UsersList = () => {\n  const dispatch = useDispatch();\n  const { data, loading } = useSelector(state => state.users.list);\n  const [page, setPage] = useState(Number.parseInt(localStorage.getItem(`users_page`)));\n  const [rowsPerPage, setRowsPerPage] = useState(Number.parseInt(localStorage.getItem(`users_per_page`)));\n\n  useEffect(() => {\n    const localPage = localStorage.getItem(`users_page`);\n    const localPerPage = localStorage.getItem(`users_per_page`);\n    if(!localPage){\n      setPage(0);\n    }\n\n    if(!localPerPage){\n      setRowsPerPage(5);\n    }\n  }, [])\n\n  useEffect(() => {\n    const per_page = 100;\n    dispatch(getUsers(per_page));\n  }, [dispatch])\n\n  const handleChangePage = (event, pageNum) => { \n    setPage(pageNum);\n    localStorage.setItem(`users_page`, pageNum);   \n  }\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(+event.target.value); \n    handleChangePage(event, 0);\n    localStorage.setItem(`users_per_page`, event.target.value);\n  }\n  \n  return <div>\n    <Paper className='m020'>\n      <Table>\n        <TableHead >\n          <TableRow className='tableHead'>\n            {headRows.map(row => (\n              <TableCell\n                key={row.id}\n                align={row.numeric ? 'right' : 'left'}\n              >\n                {row.label}\n              </TableCell>\n            ))}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {loading ? <TableLoader colSpan={3}/> :\n            data?.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((user) => (\n              <UserItem key={user.id} user={user} />\n            ))}\n        </TableBody>\n      </Table>\n      <TablePagination\n        rowsPerPageOptions={[5, 10, 20]}\n        component=\"div\"\n        count={loading ? rowsPerPage : data?.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        backIconButtonProps={{\n          'aria-label': 'previous page',\n        }}\n        nextIconButtonProps={{\n          'aria-label': 'next page',\n        }}\n        onChangePage={handleChangePage}\n        onChangeRowsPerPage={handleChangeRowsPerPage}\n      />\n    </Paper>\n  </div>;\n};\n\nexport default UsersList;"]},"metadata":{},"sourceType":"module"}